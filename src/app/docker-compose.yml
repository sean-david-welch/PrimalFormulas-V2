services:
  web:
    build: nginx
    ports:
      - 80:80
      - 443:443
    depends_on:
      - api

  app:
    build: .
    container_name: primalformulas-api
    command: uvicorn main:app --host 0.0.0.0 --port 80
    ports:
      - 8080:80
    volumes:
      - .:/app
